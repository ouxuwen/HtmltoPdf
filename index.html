<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <script>
        (function (doc, win) {
            var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    var clientWidth = docEl.clientWidth;

                    if (!clientWidth) return;
                    docEl.style.fontSize = 20 + 'px';
                };
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <style>
        html,
        body,
        div,
        span,
        applet,
        object,
        iframe,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        blockquote,
        pre,
        a,
        abbr,
        acronym,
        address,
        big,
        cite,
        code,
        del,
        dfn,
        em,
        img,
        ins,
        kbd,
        q,
        s,
        samp,
        small,
        strike,
        strong,
        sub,
        sup,
        tt,
        var,
        b,
        u,
        i,
        center,
        dl,
        dt,
        dd,
        ol,
        ul,
        li,
        fieldset,
        form,
        label,
        legend,
        table,
        caption,
        tbody,
        tfoot,
        thead,
        tr,
        th,
        td,
        article,
        aside,
        canvas,
        details,
        embed,
        figure,
        figcaption,
        footer,
        header,
        hgroup,
        menu,
        nav,
        output,
        ruby,
        section,
        summary,
        time,
        mark,
        audio,
        video {
            margin: 0;
            padding: 0;
            border: 0;

            font: inherit;
            vertical-align: baseline;
        }
        /* HTML5 display-role reset for older browsers */

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        menu,
        nav,
        section {
            display: block;
        }

        body {
            line-height: 1;
        }

        ol,
        ul {
            list-style: none;
        }

        blockquote,
        q {
            quotes: none;
        }

        blockquote:before,
        blockquote:after,
        q:before,
        q:after {
            content: '';
            content: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }
    </style>
    <style>
        .r {
            float: right;
        }

        .l {
            float: left;
        }

        .cl:after {
            content: "";
            clear: both;
            display: table;
        }

        .tc {
            text-align: center;
        }

        .re {
            position: relative;
        }

        .ac {
            position: absolute;
            margin-left: 50%;
            transform: translateX(-50%);
        }

        .tr {
            text-align: right;
        }

        .page {
            width: 91.1rem;
            height: 128.84rem;
            margin: 0 auto;
            border: 0.1rem solid #eee;
            font-family: '宋体';
            padding: 4.5rem;
            box-sizing: border-box;
            background: #fff;
        }

        .header {
            height: 10.0rem;
            padding-top: 0. 5rem;
        }

        .logo-text {

            font-size: 4.0rem;
            color: #003776;
            padding-bottom: 1rem;
        }

        .bage {
            font-family: Arial, Helvetica, sans-serif;
            font-style: italic;
            font-size: 1.2rem;
            color: #003776;
            font-weight: bold;
        }

        .body {
            border: .2rem solid #000;
            border-top: none;
            height: 100.0rem;
        }

        .title {
            height: 4.5rem;
            line-height: 4.5rem;
            background: #003776;
            color: #fff;
            font-size: 2.0rem;
            font-family: 'simhei';
            font-weight: bold;
            padding-left: 2.0rem;
        }

        .floor {
            padding: .7rem 2.2rem;
            font-size: 1.2rem;
        }

        .list li {
            line-height: 2.5rem;
            height: 2.5rem;
        }

        .list li span {
            display: inline-block;
        }

        .left.list .label {
            width: 19.0rem;
        }

        .left.list .value {
            width: 19.0rem;
        }

        .right.list .label {
            width: 12.0rem;
        }

        .mao {
            padding: 0 1.0rem;
        }

        .t-floor thead td {
            font-family: 'simhei';
            font-weight: bold;
            background: #9DA8CA;
            height: 2.5rem;
            line-height: 2.5rem;
            padding-left: 2.5rem;
            font-size: 1.2rem;
        }

        .t-floor tbody td {
            height: 2.5rem;
            line-height: 2.5rem;
            padding-left: 2.5rem;
            font-size: 1.2rem;
        }

        .list .label {
            width: 19.0rem;
        }

        .notice {
            position: absolute;
            bottom: 2.5rem;
            left: 2.5rem;
            line-height: 2rem;
        }

        .notice .bh {
            font-family: 'simhei';
            font-weight: bold;
            line-height: 1rem;
        }

        #btn {
            border-radius: .2rem;
            padding: .6rem 1.6rem;
            font-size: 1.4rem;
            color: #fff;
            margin: 1rem auto;
            font-weight: 500;
            background-color: #1e88e5;
            border: none;
            display: block;
            cursor: pointer;
        }

        #btn:hover {
            background-color: #70B4EC;
        }

        .title .noit {
            font-family: '宋体';
            font-weight: normal;
            font-size: 1.4rem;
        }

        .ticket .left.list .label {
            width: 15.0rem;
        }

        .ticket .left.list .value {
            width: 18.5rem;
        }

        .ticket .right.list .label {
            width: 15.0rem;
        }

        .passenger {

            margin: 0 2.2rem;
        }

        .passenger li {
            float: left;
            font-family: 'simhei', 微软雅黑;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .passenger li span {
            display: inline-block;
        }

        .passenger li .label {
            width: 6.5rem;
        }

        .passenger li .value {
            width: 9rem;
        }

        .passenger-name {
            margin: 1rem 2.2rem;
            font-size: 1.3rem;
        }

        .ticket .body {
            min-height: 37.5rem;
            height: auto;
        }

        .important-msg {
            border: .15rem solid #757575;
            margin: 0 2rem;
            padding: 1rem;
        }

        .important-msg .title {
            background: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: #000;
            padding: 0;
            line-height: 1;
            height: auto;
        }

        .important-msg ul {
            padding-left: 1rem;
            margin-top: 1rem;
        }

        .important-msg li {
            font-size: 1rem;
            position: relative;
            line-height: 1.3rem;
            text-align: justify
        }

        .important-msg li:before {
            content: '*';
            position: absolute;
            top: 0rem;
            left: -1rem;
        }

        .th1 {
            color: #205081;
            font-size: 3.5rem;
            font-family: 'simhei', 微软雅黑;
            font-weight: bold;
            margin-top: 5rem;
        }

        .th2 {
            line-height: 1.2;
            color: #205081;
            font-size: 3rem;
            margin-top: 2rem;
            padding-bottom: 9rem;
        }

        .imp-title {
            padding: 0.8rem 2rem;
            background: #9DA8CA;
            font-family: 'simhei', 微软雅黑;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .content {
            padding: 1.2rem 2rem 2rem 4rem;
        }

        .content li {
            position: relative;
            line-height: 1.5;
            font-size: 1.2rem;
            text-align: justify;
        }

        .content li p {
            position: absolute;
            top: 0;
            left: -2.9rem;
        }

        .content li span.bk {
            font-weight: bold;
            font-family: 'simhei', 微软雅黑;
        }

        .sign .body {
            border-top: .3rem solid #000;
            padding: 2.5rem 2.5rem 2.5rem 5rem;
        }

        .sign .sign-t {
            font-size: 1.3rem;
            font-weight: bold;
            font-family: 'simhei', 微软雅黑;
            text-align: justify;
            line-height: 1.3;
        }

        .sign .sign-line {
            font-size: 1.3rem;
            float: right;
            width: 30rem;
            border-top: .15rem solid #000;
            margin-top: 3.5rem;
            line-height: 1.5;
        }

        .sign-a {
            clear: both;
            padding-top: 3rem;
            border-top: 1px solid transparent;
            line-height: 1.3;
        }

        .sign-y {

            padding: 1rem 0;
        }

        .sign-y span {
            border: .12rem solid #000;
            display: inline-block;
            width: 1.5rem;
            height: 2rem;
            vertical-align: middle;
        }

        .sign-s {
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        p.bh {
            font-family: 'simhei', '微软雅黑';
            font-weight: bold;
            line-height: 1.5rem;
            margin-top: 1.5rem;
        }

        .tel li {
            padding-left: 3rem;
            position: relative;
            line-height: 1.2;
        }

        .tel li::before {
            content: "·";
            position: absolute;
            left: 1.5rem;
            font-size: 1.5rem;
            top: -.3rem;
        }

        .tel .label {
            display: inline-block;
            width: 11rem;
        }
    </style>

</head>

<body>
    <button id='btn'>Save as PDF</button>
    <div class="page">
        
    </div>
</body>
<script src='js/jquery.min.js'></script>
<script src='js/html2canvas.js'></script>
<script src='js/jspdf.debug.js'></script>
<script>

</script>

<script type="text/javascript">
    $('#btn').on('click', function () {
        var canWidth = $($('.page')[0]).outerWidth();
        var canHeight = $($('.page')[0]).outerHeight();
        console.log(canWidth);
        console.log(canHeight);


        //l:横向， p：纵向；单位： in:英寸，mm毫米；画布大小：a3,a4,leter,[]（当内容为数组时，为自定义大小）  
        //0.56是自己手动计算出来的比例
        var doc = new jsPDF('p', 'px', [canWidth * 0.56, canHeight * 0.56]);//设置PDF宽高为要显示的元素的宽高，将像素转化为英寸  
        //  doc.addImage(imgData, 'png',0, 0); //写入位置：x:5, y:5 单位:英寸 
        let element = $('.page');
        addPage(doc, element, 0);

    });

    //利用递归进行分页；
    function addPage(doc, element, i) {
        doc.setPage(i + 1);
        doc.addHTML(element[i], 0, 0, function () {

            if (i == element.length - 1) {
                doc.save('test.pdf');
            }
            doc.addPage();
            addPage(doc, element, i + 1);
        });
    }

    //javascript get screen DPI
    function js_getDPI() {
        var arrDPI = new Array();
        if (window.screen.deviceXDPI != undefined) {
            arrDPI[0] = window.screen.deviceXDPI;
            arrDPI[1] = window.screen.deviceYDPI;
        }
        else {
            var tmpNode = document.createElement("DIV");
            tmpNode.style.cssText = "width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden";
            document.body.appendChild(tmpNode);
            arrDPI[0] = parseInt(tmpNode.offsetWidth);
            arrDPI[1] = parseInt(tmpNode.offsetHeight);
            tmpNode.parentNode.removeChild(tmpNode);
        }
        return arrDPI;
    }

</script>

</html>
